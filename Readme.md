# Satellite-Tracking-System
**Satellite-Tracking-System — это API, который я разработал для веб-приложения студенческого стартапа,
специализирующегося на анализе спутниковых данных. 
Моя разработка представляет собой полноценное backend-решение с тщательно продуманной архитектурой, 
использующее PostgreSQL в качестве основной базы данных. Я реализовал API, обеспечивающее быстрый 
и безопасный доступ к детализированной информации о каждом спутнике
на геостационарной орбите, включая их точные технические характеристики и орбитальные параметры. 
Особое внимание я уделил системе хранения данных — изображения зон покрытия оптимально размещены 
в S3-хранилище Selectel, а в базе данных хранятся только ссылки на эти ресурсы. 
Этот API-решение предоставляет исследователям, 
разработчикам и энтузиастам космических технологий удобный структурированный доступ к актуальной информации 
о спутниковой группировке на геостационарной орбите через стандартизированные программные интерфейсы.
Мое решение обеспечивает не только удобный доступ к информации, но и закладывает основу
для будущего расширения функциональности системы.**

## Технические особенности

### Стек технологий:
- Backend: FastAPI (асинхронный)
- База данных: PostgreSQL + SQLAlchemy 2.0 (асинхронный доступ)
- Хранилище файлов: S3 Selectel (зоны покрытия спутников)
- DTO: Pydantic BaseModel (строгая типизация между слоями)

### Архитектура:
- Репозиторий: Асинхронный доступ к БД
- Сервис: Бизнес-логика и преобразования данных
- API: 44 документарованных эндпоинта

### Ключевые особенности

#### Производительность:
- Полностью асинхронный стек (от БД до API)

#### Документирование:
- Полная Swagger/OpenAPI документация
- Детальные описания для всех 44 эндпоинтов
- Примеры запросов/ответов для каждого метода

#### Надежность:
- ~300 автоматических тестов (pytest)
- Покрытие кода 92%+
- Многоуровневое тестирование:
  - Юнит-тесты репозиториев
  - Интеграционные тесты сервисов
  - E2E тесты API-эндпоинтов

## Руководство по использованию

### Создание виртуального окружения и установка зависимостей

```make install-env```

### Альтернативно (если виртуальное окружение уже создано):

```make install```

### Запуск сервера разработки:

```make run_server```

### Открытие Swagger документации

```make swagger```

### Запуск всех тестов

```make test```

### Запуск тестов с измерением покрытия кода

```make test_cov```

### Очистка результатов тестирования

```make clean_test```

### Форматирование кода (black)

```make style```

## Настройка окружения

**Для работы системы необходимо создать файл .env в директории core со следующими параметрами:**

```
# Настройки базы данных

DB_HOST=       # Адрес сервера PostgreSQL
DB_PORT=       # Порт подключения
DB_NAME=       # Название основной базы данных
DB_TEST_NAME=  # Тестовая БД (для pytest)
DB_USER=       # Логин администратора БД
DB_PASSWORD=   # Пароль администратора

# Доступ к S3-хранилищу (Selectel)

ACCESS_KEY=    # Публичный ключ доступа
SECRET_KEY=    # Приватный ключ
ENDPOINT_URL=  # Адрес S3-хранилища
BUCKET_NAME=   # Название бакета
```

## Структура базы данных

### 1. Таблица `countries` (Страны)

| Поле         | Тип          | Ограничения               | Описание                   |
|--------------|--------------|---------------------------|----------------------------|
| id           | INTEGER      | PRIMARY KEY AUTOINCREMENT | Уникальный идентификатор   |
| abbreviation | VARCHAR(10)  | UNIQUE NOT NULL           | Код страны (например "RU") |
| full_name    | VARCHAR(100) | UNIQUE NOT NULL           | Полное название страны     |

### 2. Таблица `regions` (Регионы)

| Поле        | Тип         | Ограничения               | Описание         |
|-------------|-------------|---------------------------|------------------|
| id          | INTEGER     | PRIMARY KEY AUTOINCREMENT | ID региона       |
| name_region | VARCHAR(60) | UNIQUE NOT NULL           | Название региона |

### 3. Таблица `subregions` (Субрегионы)

| Поле           | Тип         | Ограничения               | Описание            |
|----------------|-------------|---------------------------|---------------------|
| id             | INTEGER     | PRIMARY KEY AUTOINCREMENT | ID субрегиона       |
| name_subregion | VARCHAR(60) | UNIQUE NOT NULL           | Название субрегиона |
| id_region      | INTEGER     | FOREIGN KEY NOT NULL      | Ссылка на регион    |

### 4. Таблица `satellites` (Спутники)

| Поле               | Тип          | Ограничения          | Описание                   |
|--------------------|--------------|----------------------|----------------------------|
| international_code | VARCHAR(50)  | PRIMARY KEY          | Международный код спутника |
| name_satellite     | VARCHAR(100) | UNIQUE NOT NULL      | Название спутника          |
| norad_id           | INTEGER      | UNIQUE NOT NULL      | Идентификатор NORAD        |
| launch_date        | DATE         | NOT NULL             | Дата запуска               |
| country_id         | INTEGER      | FOREIGN KEY NOT NULL | Страна-владелец            |

### 5. Таблица `satellite_characteristic` (Характеристики спутников)

| Поле               | Тип          | Ограничения              | Описание               |
|--------------------|--------------|--------------------------|------------------------|
| international_code | VARCHAR(50)  | PRIMARY KEY, FOREIGN KEY | Ссылка на спутник      |
| longitude          | FLOAT        |                          | Орбитальная долгота    |
| period             | FLOAT        |                          | Орбитальный период     |
| launch_site        | VARCHAR(100) | NOT NULL                 | Место запуска          |
| rocket             | VARCHAR(50)  | NOT NULL                 | Ракета-носитель        |
| launch_mass        | FLOAT        |                          | Масса при запуске      |
| manufacturer       | VARCHAR(100) | NOT NULL                 | Производитель          |
| model              | VARCHAR(50)  | NOT NULL                 | Модель спутника        |
| expected_lifetime  | INTEGER      | NOT NULL                 | Расчетный срок службы  |
| remaining_lifetime | INTEGER      | NOT NULL                 | Остаточный срок службы |

### 6. Таблица `coverage_zones` (Зоны покрытия)

| Поле             | Тип         | Ограничения          | Описание              |
|------------------|-------------|----------------------|-----------------------|
| id               | VARCHAR(60) | PRIMARY KEY          | ID зоны покрытия      |
| satellite_code   | VARCHAR(50) | FOREIGN KEY NOT NULL | Ссылка на спутник     |
| transmitter_type | VARCHAR(25) | NOT NULL             | Тип передатчика       |
| image_data       | VARCHAR(90) | UNIQUE NOT NULL      | Ссылка на изображение |

## Связи между таблицами

### Основные связи:

1. **countries → satellites**
   - Тип: Один-ко-многим
   - Описание: Одна страна может владеть несколькими спутниками

2. **regions ↔ subregions**  
   - Тип: Один-ко-многим
   - Описание: Один регион содержит несколько субрегионов

3. **satellites ↔ satellite_characteristic**  
   - Тип: Один-к-одному
   - Описание: Каждый спутник имеет один набор характеристик

4. **satellites ↔ coverage_zones**  
   - Тип: Один-ко-многим
   - Описание: Один спутник может иметь несколько зон покрытия

### Связи многие-ко-многим:

1. **regions ↔ coverage_zones**  
   - Через ассоциативную таблицу `coverage_zone_association`
   - Описание: Одна зона покрытия может относиться к нескольким регионам

2. **subregions ↔ coverage_zones**  
   - Через ассоциативную таблицу `coverage_zone_association_subregion`
   - Описание: Одна зона покрытия может относиться к нескольким субрегионам

## Особенности реализации:
- Все связи двусторонние (используется `back_populates`)
- Оптимизированные стратегии загрузки (`selectin` для коллекций, `joined` для одиночных связей)
- Строгая типизация через SQLAlchemy 2.0
- Автоматическое строковое представление объектов (`__repr__`)